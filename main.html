<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
</head>

<body>
    <style>
        .container
        {
            text-align: center;
           font-size: 15pt;
        }
        .btn
        {
            color: cornflowerblue;
        }
        .column
        {
            float: left;
            margin-right: 10px;
            /* text-align: center; */
        }
        .clear
        {
            clear: left;
        }
        .center
        {
            /* text-align: center; */
            margin-left: auto;
            margin-right: auto;
        }
    </style>

    <div id="app">
        <v-app>
          <v-main>
           <div v-show="show1" class="container">
              
            <v-container>問題：{{num}}</v-container>
            <p>{{Question}}</p>
            <!-- <v-btn elevation="2" outlined @click="getMemberList">一覧</v-btn>
            <v-btn elevation="5" x-large color="success" dark>Extra large Button</v-btn> -->
            
            
            <p class="center" v-for="ans in shuffle(Answers)">            
            <v-btn @click="checkA(ans)" class="column" type="button"  elevation="4" outlined x-large>{{ans}}</v-btn>
            <!-- <v-btn @click="checkA()" type="button"  elevation="4" outlined x-large>B</v-btn>
            <v-btn @click="checkA()" type="button"  elevation="4" outlined x-large>C</v-btn>
            <v-btn @click="checkA()" type="button"  elevation="4" outlined x-large>D</v-btn> -->
        <div class="clear"></div></p>
                <!-- <p>{{Correct}}</p> -->
                <p>{{Answers}},{{Correct}}</p><p>Id:{{Id}},{{score}}</p>
            </div>
            <div v-show="show2">
                
                <p>正解数 : {{score}}</p><v-btn href="index.html" type="button"  elevation="4" outlined >おわり</v-btn>
            </div>
          </v-main>
        </v-app>
      </div>
        
        <script>

        let url = "https://script.google.com/macros/s/AKfycbyJMpTFY3TtzksiA55STjkx5dp4m3MCRWdQC8bocTgMDLFR98ht/exec";
            new Vue({
                    el: '#app',
                    vuetify: new Vuetify(),
                    
                    data: {
                        Question: '',
                        Correct: '',
                        Answers: '',
                        Id:'',
                        num: 1,
                        score: 0,
                        show1: true,
                        show2: false,
                        shuffleAnswers: [],
                    },
                    
                    created() {
                            let i = Math.floor( Math.random() * 14 );
                            axios.get(url)
                            .then(res => {
                                this.Question   =  res.data[i].Qui
                                this.Correct    =  res.data[i].AnsA
                                this.Id         = [res.data[i].Id]
                                this.Answers    = [res.data[i].AnsA,
                                                   res.data[i].AnsB, 
                                                   res.data[i].AnsC, 
                                                   res.data[i].AnsD]

                            })
                            .catch(res => console.log(res))
                            //this.shuffleAnswers = this.shuffle(this.Answers)
                    },
                    // mounted:{
                    //     this.shuffleAnswers = this.shuffle(this.Answers)
                    // },
                    methods:{   
                        shuffle(array){
                            const ary = array.slice()
                            for(let i = array.length -1; i > 0; i--)
                            {
                                let y = Math.floor(Math.random() * 3);                           
                                [ary[i], ary[y]] = [ary[y], ary[i]]
                            }
                            console.log(ary)
                            return ary
                        },                           
                                                               
                        checkA(ans){
                                // if(this.num < 5)
                                // {
                                //     this.num++
                                //     //this.Id.push(4);
                                //     let i = Math.floor( Math.random() * 14 )
                                //     for(let x = 0; x < this.Id.length; x++)
                                //         while(Id[x] !== i){
                                //             axios.get(url)
                                //             .then(res => {
                                //                 this.Question   =  res.data[i].Qui
                                //                 this.Correct    =  res.data[i].AnsA
                                //                 this.Answers    = [res.data[i].AnsA,
                                //                                 res.data[i].AnsB, 
                                //                                 res.data[i].AnsC, 
                                //                                 res.data[i].AnsD]
                                //                 this.Id.push(i +1)
                                                
                                //             })
                                //         }
                                // }else{
                                //     　
                                // }
                                
                                 //if(this.num < 3){
                                     console.log(ans)
                                    if(this.Correct === ans)
                                        this.score++
                                    this.num++
                                    let i = Math.floor( Math.random() * 14 )
                                     axios.get(url)
                                         .then(res => {
                                             this.Question   =  res.data[i].Qui
                                             this.Correct    =  res.data[i].AnsA
                                             //this.Id         = [i]
                                             this.Answers    = [res.data[i].AnsA,
                                                             res.data[i].AnsB, 
                                                             res.data[i].AnsC, 
                                                             res.data[i].AnsD]

                                         })
                                         .catch(res => console.log(res))
                                         this.Id.push(i +1)
                                        //  if(this.e === Correct)
                                        //     this.score++;
                                         if(this.num > 3)
                                         {
                                             this.show1 = false;
                                             this.show2 = true;
                                         }
                            //     }else{
                            //         finish()
                            //     }
                            // },
                            // finish(){
                            //     template: '<h2 class="hello">{{score}}</h2><br><v-btn @click="./">toppage</vbtn>'
                             }
                    },
                    
                    });
                    // let score = 0;

                    // const $button = document.getElementsByTagName("button");

                    // const setupQuiz = () =>
                    // {
            
                    //     for(let i = 0; i < 3; i++)
                    //     {
                    //         $button[i].textContent = data.Answers[i];
                    //     }
                    // };
                    // setupQuiz();
                    // const clickHandler = (e) =>
                    // {
                    //     if(Correct === e.target.textContent)
                    //     {
                    //         window.alert("正解");
                    //         score++;
                    //     }
                    //     else
                    //     {
                    //         window.alert("不正解");
                    //     }

                    //     quizIndex++;

                    //     if(quizIndex < 5)
                    //     {
                    //         setupQuiz(quizIndex);
                    //     }
                    //     else
                    //     {
                    //         window.alert("お　わ　り " + score + "問正解です");
                    //         location.href = '/.';
                    //     }
                    // };

                    // const handlerIndex = () =>
                    // {
                    //     for(let i = 0; i < $button.length; i++)
                    //     {
                    //         $button[i].addEventListener("click", (e) => 
                    //         {
                    //             clickHandler(e);
                    //         });
                    //     }
                    // };

                    // handlerIndex();
                                        
        </script>


</body>
</html>
